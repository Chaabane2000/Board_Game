`timescale 1ns / 1ps
//////////////////////////////////////////////////////////////////////////////////
// Company: 
// Engineer: 
// 
// Create Date: 10/31/2025 03:44:32 PM
// Design Name: 
// Module Name: tile_mask
// Project Name: 
// Target Devices: 
// Tool Versions: 
// Description: 
// 
// Dependencies: 
// 
// Revision:
// Revision 0.01 - File Created
// Additional Comments:
// 
//////////////////////////////////////////////////////////////////////////////////


module tile_mask (
    input logic [4:0] x, // 0-31
    input logic [4:0] y, // 0-31
    input logic [1:0] rotation, // 0=0째, 1=90째, 2=180째, 3=270째
    input logic [4:0] tile_id, // tile id to select
    output logic allow
);

    logic [0:31] mask [0:31]; // 32 rows, each 32 bits

    always_comb begin
        case (tile_id)
            5'd1: begin
                mask[0]  = 32'b00000000000000000000000000000000;
                mask[1]  = 32'b00000000000000000000000000000000;
                mask[2]  = 32'b00000000000000000000000000000000;
                mask[3]  = 32'b00000000000000000000000000000000;
                mask[4]  = 32'b00000000000000000000000000000000;
                mask[5]  = 32'b11111111111111111111111111111111;
                mask[6]  = 32'b11111111111111111111111111111111;
                mask[7]  = 32'b11111111111111111111111111111111;
                mask[8]  = 32'b11111111111111111111111111111111;
                mask[9]  = 32'b11111111111111111111111111111111;
                mask[10]  = 32'b11111111111111111111111111111111;
                mask[11]  = 32'b11111111111111111111111111111111;
                mask[12]  = 32'b11111111111111111111111111111111;
                mask[13]  = 32'b11111111111111111111111111111111;
                mask[14]  = 32'b11111111111111111111111111111111;
                mask[15]  = 32'b11111111111111111111111111111111;
                mask[16]  = 32'b11111111111111111111111111111111;
                mask[17]  = 32'b11111111111111111111111111111111;
                mask[18]  = 32'b11111111111111111111111111111111;
                mask[19]  = 32'b11111111111111111111111111111111;
                mask[20]  = 32'b11111111111111111111111111111111;
                mask[21]  = 32'b11111111111111111111111111111111;
                mask[22]  = 32'b11111111111111111111111111111111;
                mask[23]  = 32'b11111111111111111111111111111111;
                mask[24]  = 32'b11111111111111111111111111111111;
                mask[25]  = 32'b11111111111111111111111111111111;
                mask[26]  = 32'b11111111111111111111111111111111;
                mask[27]  = 32'b11111111111111111111111111111111;
                mask[28]  = 32'b11111111111111111111111111111111;
                mask[29]  = 32'b11111111111111111111111111111111;
                mask[30]  = 32'b11111111111111111111111111111111;
                mask[31]  = 32'b11111111111111111111111111111111;
            end
            5'd3: begin
                mask[0]  = 32'b00000000000000000000000000000000;
                mask[1]  = 32'b00000000000000000000000000000000;
                mask[2]  = 32'b00000000000000000000000000000000;
                mask[3]  = 32'b00000000000000000000000000000000;
                mask[4]  = 32'b00000000000000000000000000000000;
                mask[5]  = 32'b00000000000000000000000000000000;
                mask[6]  = 32'b00000000000000000000000000000000;
                mask[7]  = 32'b00000000000000000000000000000000;
                mask[8]  = 32'b00000000000000000000000000000000;
                mask[9]  = 32'b00000000000000000000000000000000;
                mask[10]  = 32'b00000000000000000000000000000000;
                mask[11]  = 32'b00000000000000000000000000000000;
                mask[12]  = 32'b00000000000000000000000000000000;
                mask[13]  = 32'b00000000000000000000000000000011;
                mask[14]  = 32'b00000000000000000000000000001111;
                mask[15]  = 32'b00000000000000000000000000011111;
                mask[16]  = 32'b00000000000000000000000001111111;
                mask[17]  = 32'b00000000000000000000000011111111;
                mask[18]  = 32'b00000000000000000000000111111111;
                mask[19]  = 32'b00000000000000000000001111111111;
                mask[20]  = 32'b00000000000000000000011111111111;
                mask[21]  = 32'b00000000000000000000111111111111;
                mask[22]  = 32'b00000000000000000001111111111111;
                mask[23]  = 32'b00000000000000000011111111111111;
                mask[24]  = 32'b00000000000000000111111111111111;
                mask[25]  = 32'b00000000000000001111111111111111;
                mask[26]  = 32'b00000000000000001111111111111111;
                mask[27]  = 32'b00000000000000011111111111111111;
                mask[28]  = 32'b00000000000000111111111111111111;
                mask[29]  = 32'b00000000000000111111111111111111;
                mask[30]  = 32'b00000000000001111111111111111111;
                mask[31]  = 32'b00000000000011111111111111111111;
            end
            5'd7: begin
                mask[0]  = 32'b00000000000000000000000000000000;
                mask[1]  = 32'b00000000000000000000000000000000;
                mask[2]  = 32'b00000000000000000000000000000000;
                mask[3]  = 32'b00000000000000000000000000000000;
                mask[4]  = 32'b00000000000000000000000000000000;
                mask[5]  = 32'b00000000000000000000000000011111;
                mask[6]  = 32'b00000000000000000011111111111111;
                mask[7]  = 32'b00000000000000111111111111111111;
                mask[8]  = 32'b00000000001111111111111111111111;
                mask[9]  = 32'b00000001111111111111111111111111;
                mask[10]  = 32'b00001111111111111111111111111111;
                mask[11]  = 32'b00111111111111111111111111111111;
                mask[12]  = 32'b11111111111111111111111111111111;
                mask[13]  = 32'b11111111111111111111111111111111;
                mask[14]  = 32'b11111111111111111111111111111111;
                mask[15]  = 32'b11111111111111111111111111111111;
                mask[16]  = 32'b11111111111111111111111111111111;
                mask[17]  = 32'b11111111111111111111111111111111;
                mask[18]  = 32'b11111111111111111111111111111111;
                mask[19]  = 32'b11111111111111111111111111111111;
                mask[20]  = 32'b11111111111111111111111111111111;
                mask[21]  = 32'b11111111111111111111111111111111;
                mask[22]  = 32'b11111111111111111111111111111111;
                mask[23]  = 32'b11111111111111111111111111111111;
                mask[24]  = 32'b11111111111111111111111111111111;
                mask[25]  = 32'b11111111111111111111111111111111;
                mask[26]  = 32'b11111111111111111111111111111111;
                mask[27]  = 32'b11111111111111111111111111111111;
                mask[28]  = 32'b11111111111111111111111111111111;
                mask[29]  = 32'b11111111111111111111111111111111;
                mask[30]  = 32'b11111111111111111111111111111111;
                mask[31]  = 32'b11111111111111111111111111111111;
            end
            5'd11: begin
                mask[0]  = 32'b00000111111111111111111111111111;
                mask[1]  = 32'b00000111111111111111111111111111;
                mask[2]  = 32'b00000111111111111111111111111111;
                mask[3]  = 32'b00000111111111111111111111111111;
                mask[4]  = 32'b00000111111111111111111111111111;
                mask[5]  = 32'b00000111111111111111111111111111;
                mask[6]  = 32'b00000111111111111111111111111111;
                mask[7]  = 32'b00000111111111111111111111111111;
                mask[8]  = 32'b00000111111111111111111111111111;
                mask[9]  = 32'b00000111111111111111111111111111;
                mask[10]  = 32'b00000111111111111111111111111111;
                mask[11]  = 32'b00000111111111111111111111111111;
                mask[12]  = 32'b00000111111111111111111111111111;
                mask[13]  = 32'b00000111111111111111111111111111;
                mask[14]  = 32'b00000111111111111111111111111111;
                mask[15]  = 32'b00000111111111111111111111111111;
                mask[16]  = 32'b00000111111111111111111111111111;
                mask[17]  = 32'b00000111111111111111111111111111;
                mask[18]  = 32'b00000111111111111111111111111111;
                mask[19]  = 32'b00000111111111111111111111111111;
                mask[20]  = 32'b00000111111111111111111111111111;
                mask[21]  = 32'b00000111111111111111111111111111;
                mask[22]  = 32'b00000111111111111111111111111111;
                mask[23]  = 32'b00000111111111111111111111111111;
                mask[24]  = 32'b00000111111111111111111111111111;
                mask[25]  = 32'b00000111111111111111111111111111;
                mask[26]  = 32'b00000111111111111111111111111111;
                mask[27]  = 32'b00000111111111111111111111111111;
                mask[28]  = 32'b00000111111111111111111111111111;
                mask[29]  = 32'b00000111111111111111111111111111;
                mask[30]  = 32'b00000111111111111111111111111111;
                mask[31]  = 32'b00000111111111111111111111111111;
            end        
            5'd13: begin
                mask[0]  = 32'b11111111111111111111111111111111;
                mask[1]  = 32'b11111111111111111111111111111111;
                mask[2]  = 32'b11111111111111111111111111111111;
                mask[3]  = 32'b11111111111111111111111111111111;
                mask[4]  = 32'b11111111111111111111111111111111;
                mask[5]  = 32'b11111111111111111111111111111111;
                mask[6]  = 32'b11111111111111111111111111111111;
                mask[7]  = 32'b11111111111111111111111111111111;
                mask[8]  = 32'b11111111111111111111111111111111;
                mask[9]  = 32'b11111111111111111111111111111111;
                mask[10]  = 32'b11111111111111111111111111111111;
                mask[11]  = 32'b11111111111111111111111111111111;
                mask[12]  = 32'b11111111111111111111111111111111;
                mask[13]  = 32'b11111111111111111111111111111111;
                mask[14]  = 32'b11111111111111111111111111111111;
                mask[15]  = 32'b11111111111111111111111111111111;
                mask[16]  = 32'b11111111111111111111111111111111;
                mask[17]  = 32'b11111111111111111111111111111111;
                mask[18]  = 32'b11111111111111111111111111111111;
                mask[19]  = 32'b11111111111111111111111111111111;
                mask[20]  = 32'b11111111111111111111111111111111;
                mask[21]  = 32'b11111111111111111111111111111111;
                mask[22]  = 32'b11111111111111111111111111111111;
                mask[23]  = 32'b11111111111111111111111111111111;
                mask[24]  = 32'b11111111111111111111111111111111;
                mask[25]  = 32'b11111111111111111111111111111111;
                mask[26]  = 32'b11111111111111111111111111111111;
                mask[27]  = 32'b11111111111111111111111111111111;
                mask[28]  = 32'b11111111111111111111111111111111;
                mask[29]  = 32'b11111111111111111111111111111111;
                mask[30]  = 32'b11111111111111111111111111111111;
                mask[31]  = 32'b11111111111111111111111111111111;
            end 
            5'd14: begin
                mask[0]  = 32'b00000000000011111111111111111111;
                mask[1]  = 32'b00000000000111111111111111111111;
                mask[2]  = 32'b00000000000111111111111111111111;
                mask[3]  = 32'b00000000000111111111111111111111;
                mask[4]  = 32'b00000000001111111111111111111111;
                mask[5]  = 32'b00000000001111111111111111111111;
                mask[6]  = 32'b00000000011111111111111111111111;
                mask[7]  = 32'b00000000011111111111111111111111;
                mask[8]  = 32'b00000000011111111111111111111111;
                mask[9]  = 32'b00000000111111111111111111111111;
                mask[10]  = 32'b00000000111111111111111111111111;
                mask[11]  = 32'b00000000111111111111111111111111;
                mask[12]  = 32'b00000000111111111111111111111111;
                mask[13]  = 32'b00000001111111111111111111111111;
                mask[14]  = 32'b00000001111111111111111111111111;
                mask[15]  = 32'b00000001111111111111111111111111;
                mask[16]  = 32'b00000001111111111111111111111111;
                mask[17]  = 32'b00000011111111111111111111111111;
                mask[18]  = 32'b00000011111111111111111111111111;
                mask[19]  = 32'b00000011111111111111111111111111;
                mask[20]  = 32'b00000011111111111111111111111111;
                mask[21]  = 32'b00000011111111111111111111111111;
                mask[22]  = 32'b00000011111111111111111111111111;
                mask[23]  = 32'b00000011111111111111111111111111;
                mask[24]  = 32'b00000011111111111111111111111111;
                mask[25]  = 32'b00000111111111111111111111111111;
                mask[26]  = 32'b00000111111111111111111111111111;
                mask[27]  = 32'b00000111111111111111111111111111;
                mask[28]  = 32'b00000111111111111111111111111111;
                mask[29]  = 32'b00000111111111111111111111111111;
                mask[30]  = 32'b00000111111111111111111111111111;
                mask[31]  = 32'b00000111111111111111111111111111;
            end  
            5'd18: begin
                mask[0]  = 32'b11111111111111111111111111111111;
                mask[1]  = 32'b11111111111111111111111111111111;
                mask[2]  = 32'b11111111111111111111111111111111;
                mask[3]  = 32'b11111111111111111111111111111111;
                mask[4]  = 32'b11111111111111111111111111111111;
                mask[5]  = 32'b11111111111111111111111111111111;
                mask[6]  = 32'b11111111111111111111111111111111;
                mask[7]  = 32'b11111111111111111111111111111111;
                mask[8]  = 32'b11111111111111111111111111111111;
                mask[9]  = 32'b11111111111111111111111111111111;
                mask[10]  = 32'b11111111111111111111111111111111;
                mask[11]  = 32'b11111111111111111111111111111111;
                mask[12]  = 32'b11111111111111111111111111111111;
                mask[13]  = 32'b11111111111111111111111111111111;
                mask[14]  = 32'b11111111111111111111111111111111;
                mask[15]  = 32'b11111111111111111111111111111111;
                mask[16]  = 32'b11111111111111111111111111111111;
                mask[17]  = 32'b11111111111111111111111111111111;
                mask[18]  = 32'b11111111111111111111111111111111;
                mask[19]  = 32'b11111111111111111111111111111111;
                mask[20]  = 32'b11111111111111111111111111111111;
                mask[21]  = 32'b11111111111111111111111111111111;
                mask[22]  = 32'b11111111111111111111111111111111;
                mask[23]  = 32'b11111111111111111111111111111111;
                mask[24]  = 32'b11111111111111111111111111111111;
                mask[25]  = 32'b11111111111111111111111111111111;
                mask[26]  = 32'b11111111111111111111111111111111;
                mask[27]  = 32'b11111111111111111111111111111000;
                mask[28]  = 32'b11111111111111111111111111110000;
                mask[29]  = 32'b11111111111111111111111111100000;
                mask[30]  = 32'b11111111111111111111111111100000;
                mask[31]  = 32'b11111111111111111111111111100000;
            end             
            default: begin
                mask[0]  = 32'b11111111111111111111111111111111;
                mask[1]  = 32'b11111111111111111111111111111111;
                mask[2]  = 32'b11111111111111111111111111111111;
                mask[3]  = 32'b11111111111111111111111111111111;
                mask[4]  = 32'b11111111111111111111111111111111;
                mask[5]  = 32'b11111111111111111111111111111111;
                mask[6]  = 32'b11111111111111111111111111111111;
                mask[7]  = 32'b11111111111111111111111111111111;
                mask[8]  = 32'b11111111111111111111111111111111;
                mask[9]  = 32'b11111111111111111111111111111111;
                mask[10]  = 32'b11111111111111111111111111111111;
                mask[11]  = 32'b11111111111111111111111111111111;
                mask[12]  = 32'b11111111111111111111111111111111;
                mask[13]  = 32'b11111111111111111111111111111111;
                mask[14]  = 32'b11111111111111111111111111111111;
                mask[15]  = 32'b11111111111111111111111111111111;
                mask[16]  = 32'b11111111111111111111111111111111;
                mask[17]  = 32'b11111111111111111111111111111111;
                mask[18]  = 32'b11111111111111111111111111111111;
                mask[19]  = 32'b11111111111111111111111111111111;
                mask[20]  = 32'b11111111111111111111111111111111;
                mask[21]  = 32'b11111111111111111111111111111111;
                mask[22]  = 32'b11111111111111111111111111111111;
                mask[23]  = 32'b11111111111111111111111111111111;
                mask[24]  = 32'b11111111111111111111111111111111;
                mask[25]  = 32'b11111111111111111111111111111111;
                mask[26]  = 32'b11111111111111111111111111111111;
                mask[27]  = 32'b11111111111111111111111111111111;
                mask[28]  = 32'b11111111111111111111111111111111;
                mask[29]  = 32'b11111111111111111111111111111111;
                mask[30]  = 32'b11111111111111111111111111111111;
                mask[31]  = 32'b11111111111111111111111111111111;
            end                    
        endcase
    end
    
    logic [4:0] x_r, y_r;
    
    always_comb begin
        case (rotation)
            2'd0: begin // normal
                x_r = x;
                y_r = y;
            end
            2'd1: begin // 90 degrees clockwise
                x_r = y;
                y_r = 31 - x;
            end
            2'd2: begin // 180 degrees
                x_r = 31 - x;
                y_r = 31 - y;
            end
            2'd3: begin // 270 degrees clockwise
                x_r = 31 - y;
                y_r = x;
            end
        endcase
    end
    
    assign allow = mask[y_r][x_r];

endmodule

